# Импорт вопросов в базу данных

## Описание

Скрипты для генерации и импорта вопросов в базу данных trivia-bot.

## Файлы

1. **`generate_questions.py`** - Генерирует JSON файл с вопросами (1500 вопросов по 15 темам)
2. **`import_questions_from_json.py`** - Импортирует вопросы из JSON файла в базу данных
3. **`questions_data.json`** - JSON файл с вопросами (создается после запуска генератора)

## Использование

### 1. Генерация вопросов (уже выполнено)

Вопросы уже сгенерированы в файле `questions_data.json`:
- 15 тем
- По 100 вопросов в каждой теме
- Всего 1500 вопросов

Темы:
- История (history)
- Литература (literature)
- География (geography)
- Кино (cinema)
- Музыка (music)
- Спорт (sport)
- Наука (science)
- Медицина (medicine)
- Языки (languages)
- Математика (math)
- Животные (animals)
- Еда (food)
- Мифология (mythology)
- Изобретения (inventions)
- Политика (politics)

### 2. Импорт вопросов на сервере

На сервере выполните:

```bash
cd ~/trivia-bot
source venv/bin/activate  # или . venv/bin/activate

# Скопируйте файл questions_data.json на сервер (если его нет)
# Затем запустите импорт:

python scripts/import_questions_from_json.py questions_data.json
```

Или если файл находится в другом месте:

```bash
python scripts/import_questions_from_json.py /path/to/questions_data.json
```

### 3. Что делает скрипт импорта

1. Читает JSON файл с вопросами
2. Для каждой темы:
   - Проверяет, существует ли тема в БД
   - Создает тему, если её нет
3. Для каждого вопроса:
   - Проверяет, нет ли уже такого вопроса в БД (по тексту вопроса и теме)
   - Импортирует вопрос, если его ещё нет
   - Пропускает дубликаты
4. Выводит статистику импорта

### 4. Результат

После успешного импорта вы увидите:

```
============================================================
РЕЗУЛЬТАТЫ ИМПОРТА
============================================================
Всего вопросов в файле: 1500
Успешно импортировано: 1500
Пропущено (дубликаты): 0
Ошибок: 0
Создано тем: 15
============================================================

[OK] Импорт завершен успешно!
```

## Примечания

- Скрипт автоматически создает темы, если их нет в БД
- Дубликаты вопросов пропускаются (проверка по тексту вопроса и теме)
- Скрипт коммитит изменения каждые 50 вопросов для оптимизации
- При ошибке на одном вопросе, остальные продолжают импортироваться

## Повторный импорт

Если вы запустите скрипт повторно с тем же файлом:
- Существующие вопросы будут пропущены (как дубликаты)
- Новые вопросы (если файл был обновлен) будут импортированы
- Это безопасно - скрипт не удаляет существующие вопросы
